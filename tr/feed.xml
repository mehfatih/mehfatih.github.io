<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.1">Jekyll</generator><link href="http://localhost:4000/tr/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/tr/" rel="alternate" type="text/html" /><updated>2017-08-13T22:48:42+03:00</updated><id>http://localhost:4000/</id><title type="html">M.Fatih Blog</title><subtitle>{&quot;tr&quot;=&gt;&quot;Kişisel Yazılım Blogum&quot;, &quot;en&quot;=&gt;&quot;Personel Software Blog&quot;}</subtitle><author><name>M.Fatih</name></author><entry xml:lang="tr"><title type="html">RDLC .Net 4 Local Mode Performans Sorunu</title><link href="http://localhost:4000/tr/2017/08/12/RDLC-.Net-4-Performance-Issue/" rel="alternate" type="text/html" title="RDLC .Net 4 Local Mode Performans Sorunu" /><published>2017-08-12T00:00:00+03:00</published><updated>2017-08-12T00:00:00+03:00</updated><id>http://localhost:4000/2017/08/12/RDLC-.Net-4-Performance-Issue</id><content type="html" xml:base="http://localhost:4000/2017/08/12/RDLC-.Net-4-Performance-Issue/">&lt;p&gt;Sıkıntıya sebep olan kısmı açıklayacak olursak; bir rapor, .net 4 ile ReporViewer mevcut AppDomain yerine Sandbox AppDomain yapısı içerisinde işletilmektedir. Bu yenilik ile birlikte “Expression Evaluation” ifadeleri “Local Mode” mod ile çalıştırıldığında performans sorunu ortaya çıkmaktadır. Bu soruna çözüm olarak&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Web.config &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;system.web&amp;gt;&lt;/code&gt; tag içerisine &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;trust legacyCasModel=&quot;true&quot; level=&quot;Full&quot;/&amp;gt;&lt;/code&gt; ifadesini eklemek suretiyle CAS Security yapısı sınırsız izin hakkı ile aktif hale getirilir. Bu değişik şöyle bir sıkıntıya sebep olabilir uygulama üzerinde &lt;code class=&quot;highlighter-rouge&quot;&gt;“dynamic”&lt;/code&gt; tanımlanmış bir değişken var ise uygulama runtime da hata verir.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Uygulama &lt;code class=&quot;highlighter-rouge&quot;&gt;.net 3.5&lt;/code&gt; downgrade edilir. Bu yönetimi uyguladığınızda &lt;code class=&quot;highlighter-rouge&quot;&gt;.net 4&lt;/code&gt; ile gelen yenilikleri kullanma imkanınız ortadan kalkar.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Raporlarınız yeni oluşturacağınız AppDomain içerisinde üretilir.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;a. Mevcut App Domain ayarları alınır&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;n&quot;&gt;AppDomainSetup&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentSetup&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AppDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CurrentDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetupInformation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;AppDomainSetup&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ads&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AppDomainSetup&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;ApplicationBase&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentSetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ApplicationBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;LoaderOptimization&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LoaderOptimization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MultiDomainHost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;PrivateBinPath&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentSetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PrivateBinPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;PrivateBinPathProbe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentSetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PrivateBinPathProbe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;b. CAS security yapısı aktif edilir.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;n&quot;&gt;ads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SetCompatibilitySwitches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;NetFx40_LegacySecurityPolicy&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;c. Yeni AppDomain oluşturulur&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;n&quot;&gt;AppDomain&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appDomain&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AppDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Full Trust&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FullTrustedAppDomainSetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;d. Yeni AppDomain de raporun üretileceği &lt;code class=&quot;highlighter-rouge&quot;&gt;MarshalByRefObject&lt;/code&gt; nesnesi üretilir.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt; 
&lt;span class=&quot;n&quot;&gt;ReportHelperInAppDomain&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repHelper&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ReportHelperInAppDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appDomain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;CreateInstanceAndUnwrap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Assembly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FullName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FullName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;e. Üretilen &lt;code class=&quot;highlighter-rouge&quot;&gt;AppDomain&lt;/code&gt; ve &lt;code class=&quot;highlighter-rouge&quot;&gt;MarshalByRefObject&lt;/code&gt; nesnesinde rapor render edilir.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;RenderReport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reportName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reportDataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataTableToXmlStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TableName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dicParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deviceInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>M.Fatih</name></author><summary type="html">Sıkıntıya sebep olan kısmı açıklayacak olursak; bir rapor, .net 4 ile ReporViewer mevcut AppDomain yerine Sandbox AppDomain yapısı içerisinde işletilmektedir. Bu yenilik ile birlikte “Expression Evaluation” ifadeleri “Local Mode” mod ile çalıştırıldığında performans sorunu ortaya çıkmaktadır. Bu soruna çözüm olarak</summary></entry></feed>